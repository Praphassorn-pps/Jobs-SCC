(()=>{var e={};e.id=158,e.ids=[158],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7310:e=>{"use strict";e.exports=require("url")},2910:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>s.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>_,tree:()=>c});var n=a(6965),i=a(4902),r=a(6408),s=a.n(r),o=a(4346),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);a.d(t,l);let c=["",{children:["jobs-service-example",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,9231)),"/Users/praphassorn.c/Works/Jobs-SCC/apps/web/app/jobs-service-example/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,1442)),"/Users/praphassorn.c/Works/Jobs-SCC/apps/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5438,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/praphassorn.c/Works/Jobs-SCC/apps/web/app/jobs-service-example/page.tsx"],p="/jobs-service-example/page",u={require:a,loadChunk:()=>Promise.resolve()},_=new n.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/jobs-service-example/page",pathname:"/jobs-service-example",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},509:(e,t,a)=>{Promise.resolve().then(a.bind(a,5350))},5350:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>JobsWithServicePage});var n=a(4196),i=a(8726);let ApiError=class ApiError extends Error{constructor(e,t,a,n){super(t),this.code=e,this.message=t,this.status=a,this.details=n,this.name="ApiError"}};let r={BASE_URL:"http://localhost:5000/api",TIMEOUT:3e4,USE_MOCK:!0};let ApiClient=class ApiClient{constructor(e,t=3e4){this.baseUrl=e,this.timeout=t}getAuthHeaders(){let e=this.getAccessToken();return e?{Authorization:`Bearer ${e}`}:{}}getAccessToken(){return null}setAccessToken(e){}removeAccessToken(){}async request(e,t="GET",a,n={}){let{timeout:i=this.timeout,skipAuth:r=!1,...s}=n,o=`${this.baseUrl}${e}`,l={"Content-Type":"application/json",...r?{}:this.getAuthHeaders(),...s.headers},c=new AbortController,d=setTimeout(()=>c.abort(),i);try{let e=await fetch(o,{method:t,headers:l,body:a?JSON.stringify(a):void 0,signal:c.signal,...s});clearTimeout(d);let n=e.headers.get("content-type");if(!n?.includes("application/json")){if(!e.ok)throw new ApiError("HTTP_ERROR",`HTTP ${e.status}: ${e.statusText}`,e.status);return await e.text()}let i=await e.json();if(!e.ok)throw new ApiError(i.error?.code||"API_ERROR",i.error?.message||"An error occurred",e.status,i.error?.details);if(!i.success)throw new ApiError(i.error?.code||"API_ERROR",i.error?.message||"Request failed",e.status,i.error?.details);return i.data}catch(e){if(clearTimeout(d),e instanceof ApiError)throw e;if("AbortError"===e.name)throw new ApiError("TIMEOUT","Request timeout");throw new ApiError("NETWORK_ERROR",e instanceof Error?e.message:"Network error occurred")}}async uploadFile(e,t,a){let n=`${this.baseUrl}${e}`,i=new FormData;i.append("file",t),a&&Object.entries(a).forEach(([e,t])=>{i.append(e,"object"==typeof t?JSON.stringify(t):t)});let r={...this.getAuthHeaders()};try{let e=await fetch(n,{method:"POST",headers:r,body:i}),t=await e.json();if(!e.ok||!t.success)throw new ApiError(t.error?.code||"UPLOAD_ERROR",t.error?.message||"Upload failed",e.status,t.error?.details);return t.data}catch(e){if(e instanceof ApiError)throw e;throw new ApiError("UPLOAD_ERROR",e instanceof Error?e.message:"Upload failed")}}get(e,t){return this.request(e,"GET",void 0,t)}post(e,t,a){return this.request(e,"POST",t,a)}put(e,t,a){return this.request(e,"PUT",t,a)}patch(e,t,a){return this.request(e,"PATCH",t,a)}delete(e,t){return this.request(e,"DELETE",void 0,t)}};let s=new ApiClient(r.BASE_URL,r.TIMEOUT),o={user_id:"user-001",email:"john.doe@example.com",line_user_id:"U1234567890abcdef",display_name:"John Doe",picture_url:"https://via.placeholder.com/150",prefix:"นาย",first_name:"จอห์น",last_name:"โด",phone:"0812345678",address:"123 ถนนสุขุมวิท แขวงคลองเตย เขตคลองเตย กรุงเทพฯ 10110",role:"user",pdpa_consent:!0,is_active:!0,extra_fields:{date_of_birth:"1995-05-15",education:"ปริญญาตรี วิศวกรรมศาสตร์"},created_at:"2024-01-01T00:00:00Z"},l=[{document_id:"doc-001",user_id:"user-001",document_type:"id_card",file_path:"https://example.com/documents/id-card.pdf",file_name:"id_card.pdf",file_size:1024e3,uploaded_at:"2024-01-15T10:00:00Z",is_active:!0,created_at:"2024-01-15T10:00:00Z"},{document_id:"doc-002",user_id:"user-001",document_type:"resume",file_path:"https://example.com/documents/resume.pdf",file_name:"resume_john_doe.pdf",file_size:2048e3,uploaded_at:"2024-01-15T10:05:00Z",is_active:!0,created_at:"2024-01-15T10:05:00Z"}],c={...o,documents:l},d=[{job_id:"job-001",jobcode:"DEV-001",jobname:"Frontend Developer",description:`
เราเป็นบริษัทเทคโนโลยีชั้นนำที่กำลังมองหา Frontend Developer ที่มีความสามารถในการพัฒนาเว็บแอปพลิเคชันที่ทันสมัยและใช้งานง่าย

**หน้าที่ความรับผิดชอบ:**
- พัฒนาและปรับปรุงเว็บไซต์และเว็บแอปพลิเคชัน
- ทำงานร่วมกับทีม UX/UI Designer เพื่อสร้างประสบการณ์ที่ดีให้กับผู้ใช้
- เขียนโค้ดที่สะอาด maintainable และ testable
- ทำงานร่วมกับ Backend Developer ในการเชื่อมต่อ API
- ปรับปรุงประสิทธิภาพของเว็บไซต์

**เทคโนโลยีที่ใช้:**
- React.js, Next.js, TypeScript
- TailwindCSS, styled-components
- Git, GitHub, CI/CD
- Testing: Jest, Cypress
    `,requirements:`
- ปริญญาตรีสาขาคอมพิวเตอร์ วิศวกรรมคอมพิวเตอร์ หรือสาขาที่เกี่ยวข้อง
- ประสบการณ์ 2-4 ปีในการพัฒนา Frontend
- มีความเชี่ยวชาญใน React.js, JavaScript, HTML, CSS
- มีประสบการณ์ใน TypeScript และ Next.js
- เข้าใจ Responsive Design และ Mobile-first approach
- มีทักษะการทำงานเป็นทีม
    `,benefits:`
- เงินเดือนและโบนัสตามผลงาน
- ประกันสุขภาพและประกันชีวิต
- วันหยุดพักผ่อนประจำปี 15 วัน
- Work from Home 2 วัน/สัปดาห์
- โอกาสในการพัฒนาทักษะและเติบโตในสายงาน
    `,department:"Technology",location:"กรุงเทพฯ (บางนา)",salary_range:"35,000 - 50,000 บาท",employment_type:"full-time",experience_level:"mid",status:"open",created_at:"2024-09-01T00:00:00Z"},{job_id:"job-002",jobcode:"MKT-001",jobname:"Digital Marketing Specialist",description:`
ต้องการผู้เชี่ยวชาญด้าน Digital Marketing ที่มีความคิดสร้างสรรค์และมีประสบการณ์ในการทำ Online Marketing

**หน้าที่ความรับผิดชอบ:**
- วางแผนและดำเนินการแคมเปญ Digital Marketing
- บริหารจัดการ Social Media และ Content Marketing
- วิเคราะห์ข้อมูลและรายงานผลการทำ Marketing
- ทำงานร่วมกับทีมออกแบบในการสร้าง Creative Content
- ติดตามเทรนด์และนวัตกรรมใหม่ๆ ในวงการ Digital Marketing
    `,requirements:`
- ปริญญาตรีสาขาการตลาด นิเทศศาสตร์ หรือสาขาที่เกี่ยวข้อง
- ประสบการณ์ 1-3 ปีในด้าน Digital Marketing
- มีความรู้ใน SEO, SEM, Social Media Marketing
- สามารถใช้ Google Analytics, Facebook Ads Manager
- มีความคิดสร้างสรรค์และทักษะการเขียนที่ดี
    `,benefits:`
- เงินเดือนและค่าคอมมิชชั่นตามผลงาน
- ประกันสังคมและประกันสุขภาพ
- โบนัสประจำปี
- อบรมและพัฒนาทักษะอย่างต่อเนื่อง
    `,department:"Marketing",location:"กรุงเทพฯ (สาทร)",salary_range:"25,000 - 40,000 บาท",employment_type:"full-time",experience_level:"entry",status:"open",created_at:"2024-09-15T00:00:00Z"},{job_id:"job-003",jobcode:"DEV-002",jobname:"Backend Developer (.NET)",description:`
กำลังมองหา Backend Developer ที่มีประสบการณ์ใน .NET และ C# เพื่อมาร่วมพัฒนาระบบที่มั่นคงและรองรับการใช้งานจำนวนมาก

**หน้าที่ความรับผิดชอบ:**
- พัฒนาและดูแล Backend API ด้วย .NET
- ออกแบบและพัฒนา Database Schema
- เขียน Unit Tests และ Integration Tests
- Optimize Performance และแก้ไข Bugs
- ทำงานร่วมกับทีม Frontend และ DevOps
    `,requirements:`
- ปริญญาตรีสาขาคอมพิวเตอร์ หรือสาขาที่เกี่ยวข้อง
- ประสบการณ์ 3-5 ปีใน Backend Development
- มีความเชี่ยวชาญใน .NET Core/ASP.NET Core, C#
- มีประสบการณ์ใน SQL Server หรือ PostgreSQL
- เข้าใจ RESTful API และ Microservices
- มีความรู้ใน Git, Docker, CI/CD
    `,department:"Technology",location:"กรุงเทพฯ (บางนา)",salary_range:"45,000 - 65,000 บาท",employment_type:"full-time",experience_level:"senior",status:"open",created_at:"2024-10-01T00:00:00Z"}],p=[{job_opening_id:"opening-001",job_id:"job-001",job:d[0],open_date:"2024-10-01T00:00:00Z",close_date:"2024-10-31T23:59:59Z",status:"open",position_count:2,created_at:"2024-10-01T00:00:00Z"},{job_opening_id:"opening-002",job_id:"job-002",job:d[1],open_date:"2024-10-05T00:00:00Z",close_date:"2024-11-05T23:59:59Z",status:"open",position_count:1,created_at:"2024-10-05T00:00:00Z"},{job_opening_id:"opening-003",job_id:"job-003",job:d[2],open_date:"2024-10-10T00:00:00Z",close_date:"2024-11-10T23:59:59Z",status:"open",position_count:3,created_at:"2024-10-10T00:00:00Z"}],u=[{qa_id:"qa-001",question_text:"กรุณาแนะนำตัวเองและเล่าเกี่ยวกับประสบการณ์การทำงานของคุณ",question_type:"basic",is_active:!0,created_at:"2024-01-01T00:00:00Z"},{qa_id:"qa-002",question_text:"ทำไมคุณถึงสนใจตำแหน่งงานนี้และบริษัทของเรา",question_type:"company-fit",is_active:!0,created_at:"2024-01-01T00:00:00Z"},{qa_id:"qa-003",question_text:"คุณมีประสบการณ์อะไรบ้างที่เกี่ยวข้องกับตำแหน่งงานนี้",question_type:"job-specific",job_id:"job-001",is_active:!0,created_at:"2024-01-01T00:00:00Z"}],_=[{job_application_id:"app-001",user_id:"user-001",job_opening_id:"opening-001",job_opening:p[0],extra_answers:{},status:"interview",applied_at:"2024-10-02T10:00:00Z",created_at:"2024-10-02T10:00:00Z"}],m=[{interview_id:"int-001",job_application_id:"app-001",scheduled_date:"2024-10-15T14:00:00Z",scheduled_time:"14:00",location:"ชั้น 5 ห้องประชุม A",interview_type:"onsite",status:"confirmed",result:"pending",notes:"กรุณามาถึงก่อนเวลา 15 นาที",created_at:"2024-10-05T10:00:00Z"}],g=[{notification_id:"notif-001",user_id:"user-001",type:"interview_scheduled",title:"นัดสัมภาษณ์งาน",message:"คุณได้รับการนัดสัมภาษณ์ตำแหน่ง Frontend Developer วันที่ 15 ต.ค. 2024 เวลา 14:00 น.",link:"/interviews/int-001",is_read:!1,created_at:"2024-10-05T10:00:00Z"},{notification_id:"notif-002",user_id:"user-001",type:"application_status",title:"สถานะการสมัครงาน",message:"ใบสมัครของคุณสำหรับตำแหน่ง Frontend Developer อยู่ระหว่างการพิจารณา",link:"/applications/app-001",is_read:!0,created_at:"2024-10-03T15:00:00Z",read_at:"2024-10-03T16:00:00Z"},{notification_id:"notif-003",user_id:"user-001",type:"job_opening",title:"ตำแหน่งงานใหม่",message:"มีตำแหน่งงานใหม่ที่น่าสนใจ: Backend Developer (.NET)",link:"/jobs/opening-003",is_read:!1,created_at:"2024-10-10T09:00:00Z"}],delay=(e=500)=>new Promise(t=>setTimeout(t,e)),generateId=e=>`${e}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;let AuthService=class AuthService{async lineLogin(e){if(r.USE_MOCK)return await delay(),{user:o,tokens:{access_token:"mock_access_token_"+Date.now(),refresh_token:"mock_refresh_token_"+Date.now(),expires_in:3600,token_type:"Bearer"},is_new_user:!1,requires_pdpa:!o.pdpa_consent};let t=await s.post("/auth/line/login",e,{skipAuth:!0});return t.tokens.access_token&&(s.setAccessToken(t.tokens.access_token),t.tokens.refresh_token&&localStorage.setItem("refresh_token",t.tokens.refresh_token)),t}getLineLoginUrl(e,t){let a="your_line_channel_id";if(!a)throw Error("LINE Channel ID is not configured");let n=new URLSearchParams({response_type:"code",client_id:a,redirect_uri:e,state:t||Math.random().toString(36).substring(7),scope:"profile openid email"});return`https://access.line.me/oauth2/v2.1/authorize?${n.toString()}`}async acceptPDPA(e){return r.USE_MOCK?(await delay(),{...o,pdpa_consent:e.consent}):s.post("/auth/pdpa/consent",e)}async getCurrentUser(){return r.USE_MOCK?(await delay(),o):s.get("/auth/me")}async logout(){if(r.USE_MOCK){await delay(),s.removeAccessToken();return}try{await s.post("/auth/logout")}finally{s.removeAccessToken()}}async refreshToken(){let e=localStorage.getItem("refresh_token");if(!e)throw Error("No refresh token available");if(r.USE_MOCK)return await delay(),{user:o,tokens:{access_token:"mock_access_token_"+Date.now(),refresh_token:"mock_refresh_token_"+Date.now(),expires_in:3600,token_type:"Bearer"},is_new_user:!1,requires_pdpa:!1};let t=await s.post("/auth/refresh",{refresh_token:e},{skipAuth:!0});return t.tokens.access_token&&(s.setAccessToken(t.tokens.access_token),t.tokens.refresh_token&&localStorage.setItem("refresh_token",t.tokens.refresh_token)),t}};new AuthService;let UserService=class UserService{async getProfile(){return r.USE_MOCK?(await delay(),c):s.get("/users/profile")}async updateProfile(e){return r.USE_MOCK?(await delay(),{...c,...e,updated_at:new Date().toISOString()}):s.patch("/users/profile",e)}async getDocuments(){return r.USE_MOCK?(await delay(),l):s.get("/users/documents")}async getDocumentByType(e){return r.USE_MOCK?(await delay(),l.find(t=>t.document_type===e&&t.is_active)||null):s.get(`/users/documents/type/${e}`)}async uploadDocument(e,t){return r.USE_MOCK?(await delay(1e3),{document_id:generateId("doc"),file_path:`https://example.com/documents/${e.name}`,file_name:e.name,file_size:e.size}):s.uploadFile("/users/documents/upload",e,{document_type:t})}async deleteDocument(e){if(r.USE_MOCK){await delay();return}return s.delete(`/users/documents/${e}`)}async downloadDocument(e){if(r.USE_MOCK)return await delay(),new Blob(["Mock document content"],{type:"application/pdf"});let t=await fetch(`${r.BASE_URL}/users/documents/${e}/download`,{headers:{Authorization:`Bearer ${s.getAccessToken()}`}});if(!t.ok)throw Error("Failed to download document");return t.blob()}validateDocumentFile(e,t){let a={id_card:2097152,resume:5242880,default:5242880};if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(e.type))return{valid:!1,error:"รองรับเฉพาะไฟล์ PDF, JPG, หรือ PNG เท่านั้น"};let n=a[t]||a.default;return e.size>n?{valid:!1,error:`ขนาดไฟล์ต้องไม่เกิน ${n/1048576}MB`}:{valid:!0}}};new UserService;let JobService=class JobService{async getJobs(e){if(r.USE_MOCK){await delay();let t=[...p];if(e?.status&&(t=t.filter(t=>t.status===e.status)),e?.department&&t[0]?.job&&(t=t.filter(t=>t.job?.department===e.department)),e?.employment_type&&t[0]?.job&&(t=t.filter(t=>t.job?.employment_type===e.employment_type)),e?.experience_level&&t[0]?.job&&(t=t.filter(t=>t.job?.experience_level===e.experience_level)),e?.search&&t[0]?.job){let a=e.search.toLowerCase();t=t.filter(e=>e.job?.jobname.toLowerCase().includes(a)||e.job?.description.toLowerCase().includes(a))}let a=e?.page||1,n=e?.limit||10,i=(a-1)*n,r=i+n,s=t.slice(i,r);return{jobs:s,total:t.length,page:a,limit:n,total_pages:Math.ceil(t.length/n)}}let t=new URLSearchParams;return e&&Object.entries(e).forEach(([e,a])=>{void 0!==a&&t.append(e,String(a))}),s.get(`/jobs?${t.toString()}`)}async getJobDetail(e){if(r.USE_MOCK){await delay();let t=p.find(t=>t.job_opening_id===e);if(!t)throw Error("Job not found");let a=_.find(t=>t.job_opening_id===e);return{...t,job:t.job,application:a}}return s.get(`/jobs/${e}`)}async getApplicationQuestions(e,t=3){if(r.USE_MOCK){await delay();let a=u.filter(e=>!e.job_id),n=u.filter(t=>t.job_id===e),i=[...a,...n],r=i.sort(()=>.5-Math.random());return r.slice(0,t)}return s.get(`/jobs/${e}/questions?count=${t}`)}async createApplication(e){if(r.USE_MOCK){await delay(1e3);let t=_.find(t=>t.job_opening_id===e.job_opening_id);if(t)throw Error("คุณได้สมัครตำแหน่งงานนี้แล้ว");return{job_application_id:generateId("app"),status:"pending",applied_at:new Date().toISOString()}}return s.post("/jobs/applications",e)}async getMyApplications(){if(r.USE_MOCK){await delay();let e=_.map(e=>({...e,job_opening:{...e.job_opening,job:e.job_opening.job}}));return{applications:e,total:e.length}}return s.get("/jobs/applications/me")}async getApplicationDetail(e){if(r.USE_MOCK){await delay();let t=_.find(t=>t.job_application_id===e);if(!t)throw Error("Application not found");return t}return s.get(`/jobs/applications/${e}`)}async withdrawApplication(e){if(r.USE_MOCK){await delay();return}return s.patch(`/jobs/applications/${e}/withdraw`)}async canApplyToJob(e){if(r.USE_MOCK){await delay();let t=_.find(t=>t.job_opening_id===e);if(t)return{can_apply:!1,reason:"คุณได้สมัครตำแหน่งงานนี้แล้ว"};let a=p.find(t=>t.job_opening_id===e);if(!a||"open"!==a.status)return{can_apply:!1,reason:"ตำแหน่งงานนี้ปิดรับสมัครแล้ว"};let n=new Date(a.close_date);return n<new Date?{can_apply:!1,reason:"ตำแหน่งงานนี้หมดเขตรับสมัครแล้ว"}:{can_apply:!0}}return s.get(`/jobs/${e}/can-apply`)}async getDepartments(){if(r.USE_MOCK){await delay();let e=new Set(d.map(e=>e.department).filter(Boolean));return Array.from(e)}return s.get("/jobs/departments")}};let h=new JobService;let InterviewService=class InterviewService{async getMyInterviews(){if(r.USE_MOCK){await delay();let e=m.map(e=>{let t=_.find(t=>t.job_application_id===e.job_application_id),a=t?.job_opening;return{...e,job_application:{job_application_id:t.job_application_id,user_id:t.user_id,status:t.status,job_opening:{job_opening_id:a.job_opening_id,job:{job_id:a.job.job_id,jobcode:a.job.jobcode,jobname:a.job.jobname,department:a.job.department}}}}}),t=new Date,a=e.filter(e=>new Date(e.scheduled_date)>t),n=e.filter(e=>new Date(e.scheduled_date)<=t);return{interviews:e,upcoming:a,past:n,total:e.length}}return s.get("/interviews/me")}async getInterviewDetail(e){if(r.USE_MOCK){await delay();let t=m.find(t=>t.interview_id===e);if(!t)throw Error("Interview not found");let a=_.find(e=>e.job_application_id===t.job_application_id),n=a?.job_opening;return{...t,job_application:{job_application_id:a.job_application_id,user_id:a.user_id,status:a.status,applied_at:a.applied_at,job_opening:{job_opening_id:n.job_opening_id,job:{job_id:n.job.job_id,jobcode:n.job.jobcode,jobname:n.job.jobname,description:n.job.description,department:n.job.department,location:n.job.location}}}}}return s.get(`/interviews/${e}`)}async confirmInterview(e){if(r.USE_MOCK){await delay();let t=m.find(t=>t.interview_id===e.interview_id);if(!t)throw Error("Interview not found");return{...t,status:e.status,notes:e.reason?`${t.notes}
เหตุผล: ${e.reason}`:t.notes,updated_at:new Date().toISOString()}}return s.patch(`/interviews/${e.interview_id}/confirm`,{status:e.status,reason:e.reason})}async getUpcomingInterviews(){if(r.USE_MOCK){await delay();let e=await this.getMyInterviews(),t=new Date;return t.setDate(t.getDate()+7),e.upcoming.filter(e=>new Date(e.scheduled_date)<=t)}return s.get("/interviews/upcoming")}needsConfirmation(e){return"pending"===e.status}isUpcomingSoon(e){let t=new Date(e.scheduled_date),a=new Date,n=(t.getTime()-a.getTime())/36e5;return n>0&&n<=24}formatInterviewDateTime(e){let t=new Date(e.scheduled_date);return t.toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Asia/Bangkok"})}};new InterviewService;let NotificationService=class NotificationService{async getNotifications(){if(r.USE_MOCK){await delay();let e=g.filter(e=>!e.is_read).length;return{notifications:g,unread_count:e,total:g.length}}return s.get("/notifications")}async getUnreadNotifications(){return r.USE_MOCK?(await delay(),g.filter(e=>!e.is_read)):s.get("/notifications?unread=true")}async markAsRead(e){if(r.USE_MOCK){await delay();return}return s.patch("/notifications/mark-read",{notification_ids:e})}async markOneAsRead(e){return this.markAsRead([e])}async markAllAsRead(){if(r.USE_MOCK){await delay();return}return s.patch("/notifications/mark-all-read")}async deleteNotification(e){if(r.USE_MOCK){await delay();return}return s.delete(`/notifications/${e}`)}async getUnreadCount(){if(r.USE_MOCK)return await delay(),g.filter(e=>!e.is_read).length;let e=await s.get("/notifications/unread-count");return e.count}};function useJobs(e){let[t,a]=(0,i.useState)(null),[n,r]=(0,i.useState)(!0),[s,o]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let t=!0;return async function(){try{r(!0),o(null);let n=await h.getJobs(e);t&&a(n)}catch(e){t&&o(e)}finally{t&&r(!1)}}(),()=>{t=!1}},[JSON.stringify(e)]),{data:t,loading:n,error:s}}function JobsWithServicePage(){let[e,t]=(0,i.useState)({status:"open",page:1,limit:10}),{data:a,loading:r,error:s}=useJobs(e),handleFilterChange=(e,a)=>{t(t=>({...t,[e]:a,page:1}))},handlePageChange=e=>{t(t=>({...t,page:e}))};return r?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#06C755] mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"กำลังโหลดข้อมูล..."})]})}):s?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsxs)("p",{className:"text-red-500",children:["เกิดข้อผิดพลาด: ",s.message]}),n.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-[#06C755] text-white rounded-lg",children:"ลองอีกครั้ง"})]})}):(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white shadow-sm border-b",children:(0,n.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ตำแหน่งงานทั้งหมด"}),(0,n.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["พบ ",a?.total||0," ตำแหน่งงาน"]})]})}),n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[n.jsx("aside",{className:"lg:col-span-1",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 sticky top-6",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4",children:"ค้นหา & กรอง"}),(0,n.jsxs)("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"คำค้นหา"}),n.jsx("input",{type:"text",placeholder:"ชื่อตำแหน่งหรือคำอธิบาย",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#06C755]",onChange:e=>handleFilterChange("search",e.target.value)})]}),(0,n.jsxs)("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ประเภทการจ้างงาน"}),(0,n.jsxs)("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#06C755]",onChange:e=>handleFilterChange("employment_type",e.target.value||void 0),children:[n.jsx("option",{value:"",children:"ทั้งหมด"}),n.jsx("option",{value:"full-time",children:"เต็มเวลา"}),n.jsx("option",{value:"part-time",children:"พาร์ทไทม์"}),n.jsx("option",{value:"contract",children:"สัญญาจ้าง"}),n.jsx("option",{value:"internship",children:"ฝึกงาน"})]})]}),(0,n.jsxs)("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ระดับประสบการณ์"}),(0,n.jsxs)("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#06C755]",onChange:e=>handleFilterChange("experience_level",e.target.value||void 0),children:[n.jsx("option",{value:"",children:"ทั้งหมด"}),n.jsx("option",{value:"entry",children:"เริ่มต้น"}),n.jsx("option",{value:"mid",children:"ปานกลาง"}),n.jsx("option",{value:"senior",children:"อาวุโส"})]})]}),(0,n.jsxs)("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"แผนก"}),(0,n.jsxs)("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#06C755]",onChange:e=>handleFilterChange("department",e.target.value||void 0),children:[n.jsx("option",{value:"",children:"ทั้งหมด"}),n.jsx("option",{value:"Technology",children:"Technology"}),n.jsx("option",{value:"Marketing",children:"Marketing"}),n.jsx("option",{value:"Sales",children:"Sales"}),n.jsx("option",{value:"HR",children:"HR"})]})]})]})}),n.jsx("main",{className:"lg:col-span-3",children:a?.jobs&&a.jobs.length>0?(0,n.jsxs)(n.Fragment,{children:[n.jsx("div",{className:"space-y-4",children:a.jobs.map(e=>n.jsx("div",{className:"bg-white rounded-lg shadow hover:shadow-md transition-shadow p-6",children:(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.job?.jobname}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[n.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:e.job?.jobcode}),e.job?.employment_type&&n.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 text-sm rounded-full",children:e.job.employment_type}),e.job?.experience_level&&n.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm rounded-full",children:e.job.experience_level})]}),(0,n.jsxs)("div",{className:"text-gray-600 space-y-1",children:[e.job?.location&&(0,n.jsxs)("p",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"\uD83D\uDCCD"}),e.job.location]}),e.job?.salary_range&&(0,n.jsxs)("p",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"\uD83D\uDCB0"}),e.job.salary_range]}),e.job?.department&&(0,n.jsxs)("p",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"\uD83C\uDFE2"}),e.job.department]})]}),(0,n.jsxs)("p",{className:"text-sm text-gray-500 mt-3",children:["ปิดรับสมัคร:"," ",new Date(e.close_date).toLocaleDateString("th-TH")]})]}),n.jsx("div",{className:"ml-4",children:n.jsx("a",{href:`/jobs/${e.job_opening_id}`,className:"px-6 py-2 bg-[#06C755] text-white rounded-lg hover:bg-[#05b04b] transition-colors inline-block",children:"ดูรายละเอียด"})})]})},e.job_opening_id))}),a.total_pages>1&&(0,n.jsxs)("div",{className:"mt-8 flex justify-center gap-2",children:[n.jsx("button",{onClick:()=>handlePageChange(a.page-1),disabled:1===a.page,className:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"ก่อนหน้า"}),(0,n.jsxs)("span",{className:"px-4 py-2",children:["หน้า ",a.page," จาก ",a.total_pages]}),n.jsx("button",{onClick:()=>handlePageChange(a.page+1),disabled:a.page===a.total_pages,className:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"ถัดไป"})]})]}):n.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:n.jsx("p",{className:"text-gray-500 text-lg",children:"ไม่พบตำแหน่งงานที่ตรงกับเงื่อนไข"})})})]})})]})}new NotificationService},9231:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>s,__esModule:()=>r,default:()=>l});var n=a(4074);let i=(0,n.createProxy)(String.raw`/Users/praphassorn.c/Works/Jobs-SCC/apps/web/app/jobs-service-example/page.tsx`),{__esModule:r,$$typeof:s}=i,o=i.default,l=o},4196:(e,t,a)=>{"use strict";e.exports=a(5832).vendored["react-ssr"].ReactJsxRuntime}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[902,80],()=>__webpack_exec__(2910));module.exports=a})();